- content_for :head do
  :javascript
    window.Deckhand = {
      searchPath: '#{deckhand.search_data_path}',
      showPath: '#{deckhand.data_path}',
      templatePath: '#{deckhand.templates_path}',
      ckeditor: "#{Deckhand.config.plugins.ckeditor}",
      models: #{Deckhand.config.models_config.to_json}
    };

  = javascript_include_tag 'deckhand/index'

#search
  .container
    .row
      .col-sm-4(ng-controller="SearchCtrl")
        .form-group
          %i.glyphicon.glyphicon-search(ng-class="{loading: loading}")
          %input#search-input.form-control(type="text" ng-model="result" autofocus
            typeahead="result as result._label for result in search($viewValue)"
            typeahead-loading="loading"
            typeahead-template-url="typeahead-search"
            typeahead-on-select="select()"
            typeahead-wait-ms="300")

        #opened-cards.list-group
          %a.list-group-item(ng-repeat="item in cards" ng-click="show(item._model, item.id)")
            {{item._label}}
            %i.glyphicon.glyphicon-remove(ng-click="remove(item)")

.container
  .row
    .col-sm-8.col-sm-offset-4

      #alerts
        %alert(ng-repeat="alert in alerts" type="alert.type" close="alert.close()") {{alert.message}}

      #cards(ng-controller='CardListCtrl')
        %div(ng-repeat="item in cards" ng-include="cardTemplate(item)" dh-scroll-to='showCard')

%script(type="text/ng-template" id="typeahead-search")
  %a
    %span {{match.label}}
